{
    "name": "blueplanet hybrid",
    "group": "KACO",
    "category": "Inverter",
    "description": "KACO blueplanet hybrid 10.0 TL3 inverter",

    "devices": [
        {
            "name": "<node>",
            "description": "KACO inverter EDCOM connection",
            "driver": "edcom",
			"address": "<ip>",
            "settings": "userkey=<userkey>;identkey=<identkey>"
        },
        {
            "name": "_<node>",
            "description": "KACO inverter control",
            "driver": "virtual"
        }
    ],

    "options": [
        {
            "id": "ip",
            "name": "IP address",
            "description": "The IP address of the KACO product, a connection should be established to.",
            "type": "text",
            "mandatory": true
        },
        {
            "id": "userkey",
            "name": "User key",
            "description": "The key / password for the inverter.",
            "type": "text",
            "mandatory": true
        },
        {
            "id": "identkey",
            "name": "Ident key",
            "description": "The proprietary ident key for the inverter as a RSA key or a hex string of the form '0xF0BA...",
            "type": "text",
            "mandatory": true
        }
    ],

    "items": [
        {
            "id": "input",
            "type": "Text",
            "label": "Generated power",
            "header": true,
            "format": "%.1f kW",
            "scale": 0.001,
            "input": "<node>*dc*power"
        },
        {
            "id": "cons",
            "type": "Text",
            "label": "Consumed power",
            "format": "%.1f kW",
            "scale": 0.001,
            "input": "<node>*power*cons"
        },
        {
            "id": "setpoint",
            "type": "Slider",
            "label": "Export/Import power",
            "format": "%.1f kW",
            "max": 10000,
            "min": -10000,
            "step": 500,
            "scale": 0.001,
            "default": 0,
            "mapping": {
                "SET": { "channel": "<node>*power*setpoint", "write":false }
            },
            "input": "<node>*power*setpoint"
        }
    ],

    "channels": [
        {
            "name": "<node>*dc*power",
            "description": "Inverter DC power",
            "device": "<node>",
            "address": "DC_POWER",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"W"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000, "loggingTolerance": 10, "average": true, "engine":"SQL",
                "feed": {"name": "Power generation", "tag": "<name>"}
            }
        },
        {
            "name": "<node>*dc1*voltage",
            "description": "Inverter DC1 voltage",
            "device": "<node>",
            "address": "DC_1_VOLTAGE",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"V"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 900000, "loggingTolerance": 0.1, "average": true, "engine":"SQL",
                "feed": {"name": "Voltage DC1", "tag": "<name>"}
            }
        },
        {
            "name": "<node>*dc2*voltage",
            "description": "Inverter DC2 voltage",
            "device": "<node>",
            "address": "DC_2_VOLTAGE",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"V"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 900000, "loggingTolerance": 0.1, "average": true, "engine":"SQL",
                "feed": {"name": "Voltage DC2", "tag": "<name>"}
            }
        },
        {
            "name": "<node>*ac*voltage",
            "description": "AC voltage",
            "device": "<node>",
            "address": "AC_VOLTAGE",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"V"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 900000, "loggingTolerance": 0.1, "average": true, "engine":"SQL",
                "feed": {"name": "Voltage", "tag": "<name>"}
            }
        },
        {
            "name": "<node>*l1*voltage",
            "description": "AC Phase 1 voltage",
            "device": "<node>",
            "address": "AC_L1_VOLTAGE",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"V"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 900000, "loggingTolerance": 0.1, "average": true, "engine":"SQL",
                "feed": {"name": "Voltage", "tag": "<name> L1"}
            }
        },
        {
            "name": "<node>*l2*voltage",
            "description": "AC Phase 2 voltage",
            "device": "<node>",
            "address": "AC_L2_VOLTAGE",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"V"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 900000, "loggingTolerance": 0.1, "average": true, "engine":"SQL",
                "feed": {"name": "Voltage", "tag": "<name> L2"}
            }
        },
        {
            "name": "<node>*l3*voltage",
            "description": "AC Phase 3 voltage",
            "device": "<node>",
            "address": "AC_L3_VOLTAGE",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"V"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 900000, "loggingTolerance": 0.1, "average": true, "engine":"SQL",
                "feed": {"name": "Voltage", "tag": "<name> L3"}
            }
        },
        {
            "name": "<node>*ac*frequency",
            "description": "AC frequency",
            "device": "<node>",
            "address": "AC_FREQUENCY",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"Hz"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000, "loggingTolerance": 0.01, "average": true, "engine":"SQL",
                "feed": {"name": "Frequency", "tag": "<name>"}
            }
        },
        {
            "name": "<node>*ac*power*active",
            "description": "AC active power",
            "device": "<node>",
            "address": "GRID_ACTIVE_POWER",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"W"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000, "loggingTolerance": 10, "average": true, "engine":"SQL",
                "feed": {"name": "Power active", "tag": "<name>"}
            }
        },
        {
            "name": "<node>*l1*power*active",
            "description": "AC Phase 1 active power",
            "device": "<node>",
            "address": "GRID_L1_ACTIVE_POWER",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"W"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000, "loggingTolerance": 10, "average": true, "engine":"SQL",
                "feed": {"name": "Power active", "tag": "<name> L2"}
            }
        },
        {
            "name": "<node>*l2*power*active",
            "description": "AC Phase 2 active power",
            "device": "<node>",
            "address": "GRID_L2_ACTIVE_POWER",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"W"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000, "loggingTolerance": 10, "average": true, "engine":"SQL",
                "feed": {"name": "Power active", "tag": "<name> L2"}
            }
        },
        {
            "name": "<node>*l3*power*active",
            "description": "AC Phase 3 active power",
            "device": "<node>",
            "address": "GRID_L3_ACTIVE_POWER",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"W"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000, "loggingTolerance": 10, "average": true, "engine":"SQL",
                "feed": {"name": "Power active", "tag": "<name> L3"}
            }
        },
        {
            "name": "<node>*ac*power*reactive",
            "description": "AC reactive power",
            "device": "<node>",
            "address": "GRID_REACTIVE_POWER",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"Var"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000, "loggingTolerance": 10, "average": true, "engine":"SQL",
                "feed": {"name": "Power reactive", "tag": "<name>"}
            }
        },
        {
            "name": "<node>*l1*power*reactive",
            "description": "AC Phase 1 reactive power",
            "device": "<node>",
            "address": "GRID_L1_REACTIVE_POWER",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"Var"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000, "loggingTolerance": 10, "average": true, "engine":"SQL",
                "feed": {"name": "Power reactive", "tag": "<name> L2"}
            }
        },
        {
            "name": "<node>*l2*power*reactive",
            "description": "AC Phase 2 reactive power",
            "device": "<node>",
            "address": "GRID_L2_REACTIVE_POWER",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"Var"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000, "loggingTolerance": 10, "average": true, "engine":"SQL",
                "feed": {"name": "Power reactive", "tag": "<name> L2"}
            }
        },
        {
            "name": "<node>*l3*power*reactive",
            "description": "AC Phase 3 reactive power",
            "device": "<node>",
            "address": "GRID_L3_REACTIVE_POWER",
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit":"Var"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000, "loggingTolerance": 10, "average": true, "engine":"SQL",
                "feed": {"name": "Power reactive", "tag": "<name> L3"}
            }
        },
        {
            "name": "<node>*ac*power*setpoint",
            "description": "AC active power setpoint",
            "device": "<node>",
            "address": "AC_SETPOINT",
            "configs": {"valueType":"DOUBLE", "scalingFactor": -1, "unit":"W"}
        },
        {
            "name": "<node>*power*setpoint",
            "description": "Inverter active power setpoint",
            "device": "_<node>",
            "configs": {"valueType":"DOUBLE", "unit":"W"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000, "loggingTolerance": 0.1, "engine":"SQL",
                "feed": {"name": "Power setpoint", "tag": "<name>"}
            }
        },
        {
            "name": "<node>*power*cons",
            "description": "<name> consumed power",
            "device": "_<node>",
            "configs": {"valueType":"DOUBLE", "unit":"W"},
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000, "loggingTolerance": 10, "average": true, "engine":"SQL",
                "feed": {"name": "Power consumption", "tag": "<name>"}
            }
        }
    ],

    "feeds": [
        {
            "name": "Power setpoint",
            "tag": "<name>",
            "engine": "Engine::MYSQL",
            "table": "<node>_power_setpoint",
            "unit": "W"
        },
        {
            "name": "Power consumption",
            "tag": "<name>",
            "engine": "Engine::MYSQL",
            "table": "<node>_power_cons",
            "unit": "W"
        },
        {
            "name": "Power generation",
            "tag": "<name>",
            "engine": "Engine::MYSQL",
            "table": "<node>_dc_power",
            "unit": "W"
        },
        {
            "name": "Voltage DC1",
            "tag": "<name>",
            "engine": "Engine::MYSQL",
            "table": "<node>_dc1_voltage",
            "unit": "V"
        },
        {
            "name": "Voltage DC2",
            "tag": "<name>",
            "engine": "Engine::MYSQL",
            "table": "<node>_dc2_voltage",
            "unit": "V"
        },
        {
            "name": "Power active",
            "tag": "<name>",
            "engine": "Engine::MYSQL",
            "table": "<node>_ac_power_active",
            "unit": "W"
        },
        {
            "name": "Power active",
            "tag": "<name> L1",
            "engine": "Engine::MYSQL",
            "table": "<node>_l1_power_active",
            "unit": "W"
        },
        {
            "name": "Power active",
            "tag": "<name> L2",
            "engine": "Engine::MYSQL",
            "table": "<node>_l2_power_active",
            "unit": "W"
        },
        {
            "name": "Power active",
            "tag": "<name> L3",
            "engine": "Engine::MYSQL",
            "table": "<node>_l3_power_active",
            "unit": "W"
        },
        {
            "name": "Power reactive",
            "tag": "<name>",
            "engine": "Engine::MYSQL",
            "table": "<node>_ac_power_reactive",
            "unit": "Var"
        },
        {
            "name": "Power reactive",
            "tag": "<name> L1",
            "engine": "Engine::MYSQL",
            "table": "<node>_l1_power_reactive",
            "unit": "Var"
        },
        {
            "name": "Power reactive",
            "tag": "<name> L2",
            "engine": "Engine::MYSQL",
            "table": "<node>_l2_power_reactive",
            "unit": "Var"
        },
        {
            "name": "Power reactive",
            "tag": "<name> L3",
            "engine": "Engine::MYSQL",
            "table": "<node>_l3_power_reactive",
            "unit": "Var"
        },
        {
            "name": "Voltage",
            "tag": "<name>",
            "engine": "Engine::MYSQL",
            "table": "<node>_ac_voltage",
            "unit": "V"
        },
        {
            "name": "Voltage",
            "tag": "<name> L1",
            "engine": "Engine::MYSQL",
            "table": "<node>_l1_voltage",
            "unit": "V"
        },
        {
            "name": "Voltage",
            "tag": "<name> L2",
            "engine": "Engine::MYSQL",
            "table": "<node>_l2_voltage",
            "unit": "V"
        },
        {
            "name": "Voltage",
            "tag": "<name> L3",
            "engine": "Engine::MYSQL",
            "table": "<node>_l3_voltage",
            "unit": "V"
        },
        {
            "name": "Frequency",
            "tag": "<name>",
            "engine": "Engine::MYSQL",
            "table": "<node>_ac_frequency",
            "unit": "Hz"
        }
    ]
}
